<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Regenerative Translator ‚Äî Think Like Gaia</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=DM+Mono:wght@300;400&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --soil: #2c1e0f; --bark: #4a3520; --moss: #5a6b3a; --sage: #8a9e6a;
  --stone: #b5a898; --mist: #e8e0d4; --parchment: #f2ede4; --cream: #faf7f2;
  --amber: #c17d3c; --rust: #9b4a2a;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  background:var(--cream); color:var(--soil);
  font-family:'Cormorant Garamond',Georgia,serif;
  min-height:100vh; overflow-x:hidden; position:relative;
}
body::before {
  content:''; position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(ellipse at 20% 20%,rgba(90,107,58,.06) 0%,transparent 60%),
    radial-gradient(ellipse at 80% 80%,rgba(193,125,60,.06) 0%,transparent 60%);
}
.wrap { position:relative; z-index:1; max-width:860px; margin:0 auto; padding:60px 32px 80px; }

/* Header */
.header { text-align:center; margin-bottom:48px; }
.eyebrow { font-family:'DM Mono',monospace; font-size:10px; letter-spacing:.25em;
  text-transform:uppercase; color:var(--sage); margin-bottom:16px; }
h1 { font-family:'Playfair Display',serif; font-size:clamp(30px,5vw,50px);
  font-weight:400; line-height:1.15; margin-bottom:10px; }
h1 em { font-style:italic; color:var(--moss); }
.tagline { font-size:16px; font-style:italic; color:var(--stone); font-weight:300; margin-bottom:4px; }
.sub { font-family:'DM Mono',monospace; font-size:9px; color:var(--stone);
  letter-spacing:.12em; opacity:.55; margin-top:8px; }

/* Divider */
.div { display:flex; align-items:center; gap:16px; max-width:360px;
  margin:0 auto 36px; }
.div::before,.div::after { content:''; flex:1; height:1px;
  background:linear-gradient(to right,transparent,var(--stone),transparent); }

/* Panel */
.panel { background:var(--parchment); border:1px solid rgba(181,168,152,.4);
  border-radius:2px; box-shadow:0 8px 32px rgba(44,30,15,.07),inset 0 1px 0 rgba(255,255,255,.6); }
.panel-head { display:grid; grid-template-columns:1fr 1fr;
  border-bottom:1px solid rgba(181,168,152,.4); }
.plabel { padding:13px 20px; font-family:'DM Mono',monospace; font-size:9px;
  letter-spacing:.2em; text-transform:uppercase; color:var(--stone); font-weight:300; }
.plabel:first-child { border-right:1px solid rgba(181,168,152,.4); }
.dot { display:inline-block; width:6px; height:6px; border-radius:50%;
  margin-right:8px; vertical-align:middle; position:relative; top:-1px; }
.dot-in { background:var(--stone); } .dot-out { background:var(--sage); }
.panels { display:grid; grid-template-columns:1fr 1fr; min-height:280px; }
textarea {
  width:100%; height:100%; min-height:260px; padding:22px;
  background:transparent; border:none; border-right:1px solid rgba(181,168,152,.4);
  resize:none; font-family:'DM Mono',monospace; font-size:12px; font-weight:300;
  line-height:1.75; color:var(--bark); outline:none;
}
textarea::placeholder { color:var(--stone); opacity:.6; font-style:italic;
  font-family:'Cormorant Garamond',serif; font-size:13px; }
.out { padding:22px; min-height:260px; font-size:15px; line-height:1.8; }
.out-empty { color:var(--stone); font-style:italic; font-size:14px; opacity:.7; }
.card-badge { display:inline-block; background:var(--moss); color:var(--cream);
  font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.15em;
  text-transform:uppercase; padding:3px 9px; border-radius:1px; margin-bottom:14px; }
.out-text { margin-bottom:12px; }
.loading { display:flex; flex-direction:column; align-items:center;
  justify-content:center; height:100%; min-height:200px; gap:14px; }
.spin { font-size:26px; animation:breathe 2.5s ease-in-out infinite; }
@keyframes breathe { 0%,100%{opacity:.25;transform:scale(.94)} 50%{opacity:.9;transform:scale(1.06)} }
.spin-txt { font-family:'DM Mono',monospace; font-size:10px; letter-spacing:.2em;
  color:var(--sage); text-transform:uppercase; }
.err { color:var(--rust); font-family:'DM Mono',monospace; font-size:11px;
  line-height:1.6; font-weight:300; }

/* API key bar */
.apibar { margin-top:16px; padding:14px 18px; background:rgba(181,168,152,.1);
  border:1px solid rgba(181,168,152,.3); display:flex; align-items:center; gap:12px; }
.apibar label { font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.2em;
  text-transform:uppercase; color:var(--stone); white-space:nowrap; font-weight:300; }
#apiKey { flex:1; background:transparent; border:none;
  border-bottom:1px solid rgba(181,168,152,.5); padding:4px 0;
  font-family:'DM Mono',monospace; font-size:12px; color:var(--bark); outline:none; }
.apibar a { font-family:'DM Mono',monospace; font-size:9px; color:var(--sage);
  text-decoration:none; white-space:nowrap; opacity:.8; }
.apibar a:hover { opacity:1; }

/* Action bar */
.actbar { display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; border-top:1px solid rgba(181,168,152,.4);
  background:rgba(232,224,212,.25); gap:10px; flex-wrap:wrap; }
.btn-go { display:flex; align-items:center; gap:9px; background:var(--moss);
  color:var(--cream); border:none; padding:11px 26px; font-family:'Cormorant Garamond',serif;
  font-size:15px; font-style:italic; cursor:pointer; border-radius:1px;
  transition:all .2s ease; }
.btn-go:hover { background:var(--bark); transform:translateY(-1px);
  box-shadow:0 4px 16px rgba(44,30,15,.2); }
.btn-go:disabled { opacity:.45; cursor:not-allowed; transform:none; }
.btn-clr { background:transparent; border:none; color:var(--stone);
  font-family:'DM Mono',monospace; font-size:10px; letter-spacing:.12em;
  text-transform:uppercase; cursor:pointer; padding:8px 4px; font-weight:300;
  transition:color .2s; opacity:.65; }
.btn-clr:hover { color:var(--rust); opacity:1; }
.btn-copy { display:none; align-items:center; gap:7px; background:transparent;
  color:var(--stone); border:1px solid rgba(181,168,152,.5); padding:9px 16px;
  font-family:'DM Mono',monospace; font-size:10px; letter-spacing:.14em;
  text-transform:uppercase; cursor:pointer; border-radius:1px; transition:all .2s; }
.btn-copy:hover { border-color:var(--sage); color:var(--moss); }
.btn-copy.show { display:flex; }
.btn-copy.copied { color:var(--moss); border-color:var(--moss); }

/* Examples */
.examples { margin-top:32px; }
.sec-label { font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.2em;
  text-transform:uppercase; color:var(--stone); font-weight:300; margin-bottom:12px; }
.pills { display:flex; flex-wrap:wrap; gap:7px; }
.pill { background:transparent; border:1px solid rgba(181,168,152,.45); color:var(--bark);
  padding:7px 13px; font-family:'DM Mono',monospace; font-size:10px; font-weight:300;
  cursor:pointer; border-radius:1px; transition:all .2s; text-align:left; }
.pill:hover { border-color:var(--sage); background:rgba(90,107,58,.06); color:var(--moss); }

/* Vocab strip */
.vocab { margin-top:44px; padding:24px 0; border-top:1px solid rgba(181,168,152,.3);
  border-bottom:1px solid rgba(181,168,152,.3); }
.vocab-cats { display:grid; grid-template-columns:repeat(3,1fr); gap:20px; margin-top:14px; }
.vcat h4 { font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.18em;
  text-transform:uppercase; color:var(--sage); font-weight:400; margin-bottom:9px; }
.vtags { display:flex; flex-wrap:wrap; gap:5px; }
.vtag { font-family:'Cormorant Garamond',serif; font-size:12px; font-style:italic;
  color:var(--bark); background:rgba(181,168,152,.15); padding:2px 8px;
  border-radius:1px; opacity:.85; }

/* Footer */
.footer { margin-top:48px; text-align:center; }
.footer .fq { font-family:'Cormorant Garamond',serif; font-size:13px;
  font-style:italic; color:var(--stone); opacity:.55; margin-bottom:6px; }
.footer p { font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.14em;
  color:var(--stone); opacity:.4; }

@media(max-width:580px){
  .panels,.panel-head,.vocab-cats{grid-template-columns:1fr;}
  .plabel:first-child{border-right:none;border-bottom:1px solid rgba(181,168,152,.4);}
  textarea{border-right:none;border-bottom:1px solid rgba(181,168,152,.4);}
}
</style>
</head>
<body>
<div class="wrap">

<header class="header">
  <div class="eyebrow">‚ú¶ a Cards for Life experience ‚ú¶</div>
  <h1>The <em>Regenerative</em><br>Translator</h1>
  <p class="tagline">Thinking like Gaia, one incident ticket at a time</p>
  <p class="sub">paste technical text &middot; draw a card &middot; receive planetary wisdom</p>
  <p class="sub">bring your own anthropic api key &middot; free to use &middot; open source</p>
</header>

<div class="div"><span>üåø</span></div>

<div class="panel">
  <div class="panel-head">
    <div class="plabel"><span class="dot dot-in"></span>Your linear thinking</div>
    <div class="plabel"><span class="dot dot-out"></span>Planetary wisdom</div>
  </div>
  <div class="panels">
    <textarea id="inp" placeholder="Paste your incident report, bug description, system alert, or any technical communication here...&#10;&#10;Example: ALPS fabric recovery in progress. Memory fragmentation persists between process launches. Waiting for AMD defragmentation script."></textarea>
    <div class="out" id="out">
      <p class="out-empty">The translation will emerge here, when you are ready to receive it.</p>
    </div>
  </div>
  <div class="actbar">
    <div style="display:flex;gap:10px;align-items:center">
      <button class="btn-go" id="goBtn" onclick="doTranslate()">üåç Think Like Gaia</button>
      <button class="btn-clr" onclick="doClear()">clear</button>
    </div>
    <button class="btn-copy" id="copyBtn" onclick="doCopy()">üìã copy</button>
  </div>
</div>

<div class="apibar">
  <label for="apiKey">API Key</label>
  <input type="password" id="apiKey" placeholder="sk-ant-api03-..." autocomplete="off" />
  <a href="https://console.anthropic.com" target="_blank">get key ‚Üó</a>
</div>

<div class="examples">
  <div class="sec-label">‚Üì draw from the example pool</div>
  <div class="pills" id="pills"></div>
</div>

<div class="vocab">
  <div class="sec-label">‚ú¶ the living vocabulary ‚Äî Cards for Life deck</div>
  <div class="vocab-cats">
    <div class="vcat"><h4>Dynamics</h4><div class="vtags" id="vtDyn"></div></div>
    <div class="vcat"><h4>Being</h4><div class="vtags" id="vtBeing"></div></div>
    <div class="vcat"><h4>Doing</h4><div class="vtags" id="vtDoing"></div></div>
  </div>
</div>

<footer class="footer">
  <p class="fq">"In every cycle is a phase of fruition"</p>
  <p>REGENERATIVE TRANSLATOR &middot; CARDS FOR LIFE EDITION </p>
  <p style="margin-top:10px;">
      Card vocabulary from <a href="https://paleblueperspective.com/cards-for-life" target="_blank" style="color:var(--sage);text-decoration:none;">Cards for Life</a>
      by Tom Mansfield / Pale Blue Perspective, used under
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" style="color:var(--sage);text-decoration:none;">CC BY-NC-SA 4.0</a>.
  </p>
</footer>

</div>

<script>
// Full Cards for Life vocabulary ‚Äî extracted from the complete deck
// Structure: { name, tagline, description, keywords }

const FULL_CARDS = {
  dynamics: [
    {
      name: "Energy",
      tagline: "Energy animates matter into life",
      description: "Energy flows where your focus goes. Re-source and generate energy, direct it to benefit the whole.",
      keywords: "Sources, renewables, cycles & flows, peaks & troughs, alternatives, cosmogenesis, extropy"
    },
    {
      name: "Place",
      tagline: "Where culture and nature fuse",
      description: "Connect with local beings, textures, forms and flavours that emerge from the region. Regenerative relationships are rooted in the uniqueness of place.",
      keywords: "Uniqueness, suchness, biome, bioregionalism, Indigeneity, belonging, homelands"
    },
    {
      name: "Growth",
      tagline: "Growing and developing together",
      description: "Feed what you want to grow, take in the nourishment you need. Create conditions conducive to growth and development.",
      keywords: "Development, emergence, productivity, maximising, increase, thrive"
    },
    {
      name: "Yield",
      tagline: "In every cycle is a phase of fruition",
      description: "Reflect on what has been produced by a phase of growth and effort, take stock, enjoy what you've created. An honourable harvest takes only that which is given.",
      keywords: "Reflect, appreciate, collect, share, abundance, honourable harvest"
    },
    {
      name: "Impermanence",
      tagline: "All good things... give way to the new",
      description: "Let breakdown give way to reorganisation in the great cycle of adaptation. Embrace endings, accept collapse.",
      keywords: "Change, collapse, death, decay, life-cycles, letting go, grief, release, composting"
    },
    {
      name: "Balance",
      tagline: "Life balances on the border of chaos and order",
      description: "Bring attention to the space between breaths. Rest, reflect and self-regulate ready for disruption.",
      keywords: "Lower extremes, equilibrium, homeostasis, balance, co-regulate, self-management"
    },
    {
      name: "Disruption",
      tagline: "There is no breakthrough without breakdown",
      description: "Accept the inevitability of disruption and make use of the opportunities it brings. Work with disruption to shake loose old structures that no longer serve.",
      keywords: "Change, disturbance, disequilibrium, shift, intervention, chaos"
    },
    {
      name: "Margins",
      tagline: "There is magic to be found in the marginal",
      description: "Switch from spotlight to floodlight, who and where is outside of the focus? Go exploring in the banks of the mainstream, pay attention to the edges.",
      keywords: "Edges, borders, periphery, quieter voices, liminal zones, inclusivity"
    },
    {
      name: "Pattern",
      tagline: "The world is woven of patterns and flows",
      description: "Shape flows of attention and activity with ritual and routine. Notice how patterns around you are either nurturing or limiting life.",
      keywords: "Repetition, rhythm, regularity, predictability, Li, relationship, habit, dinergy"
    },
    {
      name: "Potential",
      tagline: "Potential is the force of life poised to unfurl",
      description: "There is greater potential to be manifested. Take a fresh look at the system or being and imagine it expressing its full potential.",
      keywords: "Gift, seed, bringing forth, essence, potency, budding, realising, latent"
    },
    {
      name: "Diversity",
      tagline: "Unity in diversity",
      description: "Embrace unfamiliar beings, elements and experiences. Cultivate variety, diversity is resilience.",
      keywords: "Variation, inclusion, resilience, richness, pluralism, difference, xenophilia"
    },
    {
      name: "Relationship",
      tagline: "Life is not a collection of objects but a fabric of relationships",
      description: "Instead of individuals try to see relationships. Health lies in the quality of connections, tend them well and know yourself through others.",
      keywords: "Connectedness, meaning, communication, listening, trust, reciprocity, amity, mutuality"
    },
    {
      name: "Attraction",
      tagline: "Become a vibrational match to what you are attracting",
      description: "Notice what you're attracting and what is attracting you. Work with natural attractors and their ability to draw attention, energy and activity.",
      keywords: "Allure, beauty, curiosity, gravity, magnetism, desire, draw, charm, fascination, love"
    },
    {
      name: "Mutuality",
      tagline: "I'll scratch your back and you scratch mine",
      description: "Your gifts are complementary to other beings, as are their gifts to you. Give what you can and receive what you need so both needs are being met.",
      keywords: "Reciprocity, relationship, exchange, gift, synergy, mutual aid, cooperation"
    },
    {
      name: "Synergy",
      tagline: "Co-creating a greater whole",
      description: "Where interests and goals are converging, allies can be identified. Bring energy to complementary relationships and allow for synergistic collaboration to emerge.",
      keywords: "Energetic shift, better together, win-win-win, alignment, collaboration, symbiosis"
    },
    {
      name: "Interdependence",
      tagline: "I am because we are",
      description: "Our life is exquisitely interdependent with all living systems. Honour your interdependencies, trace them from your local place to the greater whole.",
      keywords: "Exchange, reliance, symbiosis, inter-being, mutual flourishing, interflow, concatenation"
    },
    {
      name: "Feedback",
      tagline: "The living world is always speaking to us and through us",
      description: "Practice processes of self-reflection as a form of internal feedback. Create space and permission to give and receive, seek out feedback and integrate it.",
      keywords: "Self-regulation, adaptation, adjustment, reflection, homeostasis, positive and negative, Safe & brave space"
    },
    {
      name: "Integration",
      tagline: "Continuously becoming more whole",
      description: "Bring the novel and the new, the marginal and emergent into cohesion with the whole. Try creative mediums to integrate learnings, ideas and experiences in different ways.",
      keywords: "Processing, internalising, memorising, composting, belonging, understanding"
    },
    {
      name: "Emergence",
      tagline: "From simplicity, complexity grows",
      description: "Life comes out of the world, in the way an apple tree 'apples', the planet 'peoples' and so, our lives are emerging. Complexity emerges out of many simple interactions and relationships.",
      keywords: "Potential, unfolding, unexpected phase shift, new being, unfolding"
    },
    {
      name: "Nested Systems",
      tagline: "Zooming in and out at the same time",
      description: "Support subsystems to contribute to the health of the whole. You are a community of microscopic life within a community of macroscopic life ‚Äî all scales are linked.",
      keywords: "Wholes within wholes, holons, concentric, matryoshka, holobiants, micro-macro, trophic levels, fractals"
    },
    {
      name: "Collapse",
      tagline: "When systems break down new life breaks through",
      description: "Collapse is an essential stage in all cycles of adaptation, allow autumn to fall. Make space for collapse to occur without resistance, end a period of exertion.",
      keywords: "Crash, decline, fall, obsolescence, unravelling, apoptosis"
    },
    {
      name: "Entanglement",
      tagline: "Life holds itself in so many ways",
      description: "See beings and contexts as continuous with each other through time and space ‚Äî consider where you really end and begin. Relax boundaries and borders so life can hold itself together.",
      keywords: "Overlap, fuzzy boundaries, syntropy, synthesis, sensuality, loving"
    },
    {
      name: "Synchronise",
      tagline: "Coordinated action turns ripples into waves of change",
      description: "Find patterns of working together for greater thriving. Timing is key, create shared agreements and commitments to act.",
      keywords: "Synchronised action, collaboration, surplus, abundance, harmony, concordance"
    },
    {
      name: "Compost",
      tagline: "Endings enrich new beginnings",
      description: "The composting phase is how life creates conditions for new growth. In a time of breakdown there may be much activity under the surface.",
      keywords: "Hospicing, decomposing, unlearning, death, decay, enrichment, fertility"
    },
    {
      name: "Coordination",
      tagline: "Maturity, refinement, planetary health, benefit the whole",
      description: "What improvements to processes can be made if the how is as important as the why? Can you prioritise quality over quantity? Is the process, product or service the most mature that it can be? How would your approach change if it were optimised for planetary health?",
      keywords: "Maturity, refinement, planetary health, benefit the whole"
    }
  ],

  being: [
    {
      name: "Presence",
      tagline: "Relaxing from the doing into the being mode",
      description: "It is only when there is no goal and no rush that the human senses are fully open to receive the world... relax, breathe, observe. Notice what you're noticing.",
      keywords: "Awareness, open mode, deep listening, embodiment, composure, rootedness, mindfulness"
    },
    {
      name: "Sense & respond",
      tagline: "No plan survives contact with reality",
      description: "Sense the system first, then adapt plans with response-ability. Choice grows in the pause between stimulus and response.",
      keywords: "Systems feeling, observe & interact, response-ability, awareness, receptivity"
    },
    {
      name: "Fluidity",
      tagline: "See your life as a river running, seeking depth",
      description: "Changing circumstances change you ‚Äî take the path of least resistance and go with the flow. To be fluid is to be fluent, communicate well.",
      keywords: "Adaptability, flexibility, path of least resistance, seeking balance"
    },
    {
      name: "Slow & steady",
      tagline: "Move slow and make things",
      description: "Go step by step, don't force things, conserve energy for when it is really needed. If you want to go fast go alone, if you want to go far go together.",
      keywords: "Patience, pace, small steps, appropriate timing"
    },
    {
      name: "Intuition",
      tagline: "Our intuition may guide us now",
      description: "Step out of the situation or tension of trying to decide. Clear space for quiet and stillness to hear and trust the inner knowing you possess.",
      keywords: "Gut feeling, knowing deep down, truth, inner guidance, trust, sensing, InnSaei"
    },
    {
      name: "Adaptability",
      tagline: "Adaptation is a dance with disruption",
      description: "Cultivate skills and abilities that enable you to change. Use stored energy and resources to fit the new circumstance. Change is an invitation to reorganise.",
      keywords: "Adaptability, flexibility, path of least resistance, seeking balance"
    },
    {
      name: "Constrain",
      tagline: "A river's flow is constrained by its banks",
      description: "To be partly constrained is to be freed from the paralysis of too much choice. We thrive in constraints; effectiveness, creativity and fitness are all stimulated by boundaries to push against.",
      keywords: "Limitations, boundaries, finite resources, innovation"
    },
    {
      name: "Cohere",
      tagline: "And now our minds are one",
      description: "When beings, systems and ideas are in tune they act in harmony and flow. Initiate practices that can bring the group or system into coherence, within and without.",
      keywords: "Synchronise, attune, harmonise, congruency, rapport, collective intelligence, togethering, scenius, affinity"
    },
    {
      name: "Creativity",
      tagline: "Play is how life learns",
      description: "Become serious about play. See imagination as a public good. Fail better and love mistakes, experiment until you make the right one. Suspend judgement.",
      keywords: "Imagination, experimentation, iteration, synthesis, artistry, craft"
    },
    {
      name: "More-than-human",
      tagline: "We coexist in a common wealth of breath",
      description: "Acknowledge all species with attention and gesture, show that you want them to thrive. Expand your sense of 'people' to all beings.",
      keywords: "Life centred design, nonhuman people, animism, pluralism, bio-collectives, animalhood"
    },
    {
      name: "Belong",
      tagline: "With a feeling of love and belonging comes the courage to be our true selves",
      description: "Accept yourself and others will accept you. We come 'out of' the world not 'into it' ‚Äî everyone is native to Earth. We all belong in Gaia.",
      keywords: "Connect, reside, identify, relate"
    },
    {
      name: "Wholeness",
      tagline: "We contain multitudes",
      description: "Bring your whole self to your work and be seen by others. Witnessing each other in wholeness creates trust and resilience.",
      keywords: "Integrated diversity, multifaceted, breadth & depth, acceptance, inclusion, individuation, authenticity"
    },
    {
      name: "Keystone species",
      tagline: "We have an integral role to play in the life of the world",
      description: "See humanity's unique potential and capability for regenerating planetary health. Our power is matched only by our responsibility.",
      keywords: "Nature as teacher, nature as mentor, nature as guide, biophilia"
    },
    {
      name: "Nurture",
      tagline: "Nature is nurture",
      description: "Express your parental and mentoring instincts ‚Äî there are more than human beings to nurture. Reflect on the nurturing you have received, consider how you nurture yourself.",
      keywords: "Care, cultivate, feed, encourage, safety"
    },
    {
      name: "Gratitude",
      tagline: "To give thanks is to fully receive",
      description: "Practicing gratitude helps to circulate the living flow of energy and abundance. Write, speak or gesture your gratitude for life and share it with others.",
      keywords: "Thanks, acknowledgement, appreciation, celebration, generous feeling, love"
    },
    {
      name: "Compassion",
      tagline: "Holding an open heart is a courageous gift to all",
      description: "Practice compassion for yourself before widening the circle to others. Imagine feeling as another being feels ‚Äî allow love to expand like ripples in a pond.",
      keywords: "Love, empathy, emotional intelligence, care, kindness"
    },
    {
      name: "Threshold",
      tagline: "A journey of a thousand miles begins with a single step",
      description: "Expand your question into your quest ‚Äî the one that requires your gift. To cross a threshold is to embrace change, mature and grow.",
      keywords: "Point of no return, daring greatly, leaving comfort zone, rite of passage, portal"
    },
    {
      name: "Serendipity",
      tagline: "Good fortune is found on new paths",
      description: "Make time for someone or somewhere new. Be in nature without a goal, change route and take the road less travelled.",
      keywords: "Happenstance, chance, sagacity, synchronicity, coincidence, surprise"
    },
    {
      name: "Spiral time",
      tagline: "History rhymes",
      description: "Sometimes we are close and sometimes we are far from a previous wind of the spiral. See time as an unfurling spiral rather than a straight line and notice the characteristics of the changing phases it turns through.",
      keywords: "Kairos, non-linear, great turning, repetitive change, spirality"
    },
    {
      name: "Discomfort",
      tagline: "Resistance is fertile",
      description: "Go through discomfort, it is a portal to authenticity and truth. Have tough conversations, hold space for heavy emotions and stay with the trouble.",
      keywords: "Hopelessness, grief, shame, loss, failure, confusion, embarrassment, uncertainty"
    },
    {
      name: "Uncertainty",
      tagline: "Uncertainty gives birth to all new things",
      description: "Embracing the unknown requires releasing protections like prediction and control. Hold your intention with courage in these times of deep uncertainty.",
      keywords: "Unknown, chaos, flux, mystery, unpredictability, deep uncertainty"
    },
    {
      name: "Release",
      tagline: "Release creates space for renewal",
      description: "Release attachment to fixed identities, welcome authenticity. Relax the tension of desired outcomes. Resolve what you can and let go what you can't.",
      keywords: "Surrender, let go, allow, exhale, decompress, relax, erupt"
    },
    {
      name: "Alignment",
      tagline: "Aligning values with word and action",
      description: "When the system's moral compass defines its actions, purpose and power connect. Saying yes and saying no can both be expressions of integrity and alignment.",
      keywords: "Authenticity, truth, honesty, meaning, integrity, unity, converge"
    },
    {
      name: "Fallow",
      tagline: "Being still enough for life to move",
      description: "Sometimes we need to stop ploughing and let things revitalise at their own pace. If you became still like a meadow something unexpected might emerge.",
      keywords: "Stillness, allowing, replenishing, letting come, self-care, wuwei, personal growth, hibernate"
    }
  ],

  doing: [
    {
      name: "Regenerate",
      tagline: "Regenerate to thrive",
      description: "Work with living systems by encouraging their ability to self-heal. Feel for undernourished and neglected aspects of yourself ‚Äî what needs regenerating inside?",
      keywords: "Restore, replant, replenish, ecosystem restoration, renewal, post-collapse, revitalise"
    },
    {
      name: "Abundance",
      tagline: "Increasing the conditions conducive to life",
      description: "Outperforming competition with radical generosity. Leave places more alive than you found them.",
      keywords: "Generosity, net-positive, non-zero sum, surplus"
    },
    {
      name: "Stabilise",
      tagline: "Home sweet homeostasis",
      description: "Life creates conditions conducive to life by minimising temperature extremes and stabilising climates. Explore forms of self-regulation ‚Äî calibrate your own range to find balance.",
      keywords: "Lower extremes, equilibrium, homeostasis, balance, co-regulate, self-management"
    },
    {
      name: "Empower",
      tagline: "Power over, power within, power with, power to",
      description: "Become powerful enough to empower others. Demonstrate leadership by giving 'power to' and holding 'power with' other beings so they can shape their own life and world.",
      keywords: "Coach, empower, support, ally, sovereignty, agency, co-creation"
    },
    {
      name: "Biomimicry",
      tagline: "Mirroring nature's brilliance",
      description: "Life has 3.8 billion years of experience to share, draw inspiration with humility. Imitating nature's forms, processes and systems to re-harmonise our relationships.",
      keywords: "Nature as teacher, nature as mentor, nature as guide, biophilia"
    },
    {
      name: "Optimise",
      tagline: "The best for all is the best for one",
      description: "If Maximising increases growth by extracting nutrients from the whole, Optimising refines processes by nourishing the whole. Be a healthy cell in the body of the world, just as you are.",
      keywords: "Maturity, refinement, planetary health, benefit the whole"
    },
    {
      name: "Decentralise",
      tagline: "The revolution will be decentralised",
      description: "Natural systems expand as space filling patterns, forming resilient networks. A web can hold if some strands break. Spread out decision making, delegate and diversify.",
      keywords: "Scale out, networked, peer to peer, mesh, self-organising, horizontal, distributed"
    },
    {
      name: "Transform",
      tagline: "Life is change",
      description: "Deep adaptation requires deep transformation, both are needed in this time. From consuming to creating, something entirely new...",
      keywords: "Change, metamorphosis, conversion, transmutation, transfiguration, alteration, phase shift"
    },
    {
      name: "Conditions",
      tagline: "Attending to the whole",
      description: "A systems approach may be more about tending conditions for change than direct action. Tend the relationships that can give rise to the change, allow it to emerge from there.",
      keywords: "Tending, circumstances, indirect work, emergence, prepare the soil"
    },
    {
      name: "Wealth for life",
      tagline: "The currency of nature is not money, it is life",
      description: "Practice multi-capital abundance by centring forms of non-financial wealth. Connect value with values. See multiple capitals as a richness of flows.",
      keywords: "Multiple capitals, Re-fi, natural capitals, Doughnut Economics, post-growth, co-prosperity"
    },
    {
      name: "Embracing Flows",
      tagline: "When the winds of change blow, some build walls, others build windmills",
      description: "How flows move through the system is more important than their destination. Embrace the fluctuation of flows like the land ‚Äî rivers don't rush in straight lines to the sea.",
      keywords: "The great flow-energy field, elemental energies, absorbing, contours, flow structures"
    },
    {
      name: "Reconnecting",
      tagline: "Life is seeking connection, it needs the freedom to find it",
      description: "Identify structures of separation and segregation. Create freedom for life to move through. Stitch the wound.",
      keywords: "Reconnecting, healing, bridging, opening, interweaving"
    },
    {
      name: "Seasons & cycles",
      tagline: "Attune to the seasons and cycles of the world",
      description: "Pattern your plans in tune with the clocks of our living system. Allow priorities and goals to grow out of natural timing.",
      keywords: "Rhythm, cycle, repetitive change, phases, seasonality"
    },
    {
      name: "Food for life",
      tagline: "Regenerative agriculture fundamentally shifts our relationship within nature",
      description: "The quality of your nutrition affects the quality of you. Choose food that has been cultivated in a caring way ‚Äî every choice is a vote for the food you want to see in the world.",
      keywords: "Regenerative agriculture, syntropy, polyculture, permaculture, biodiversity, foodscapes, nutrition"
    },
    {
      name: "Rewilding",
      tagline: "Our lineage is wild, including and integrating it enhances civilisation",
      description: "Some nurturing requires inaction ‚Äî allow wilderness to occur. There is soulfulness in wildness, let us bring it in now.",
      keywords: "Freedom, individuation, release, control, allow, self-willed"
    },
    {
      name: "Layering purpose",
      tagline: "Loving linking life in layers of ways",
      description: "Purpose is relational and multifaceted ‚Äî layer more than just human purpose into your activities and designs. Become like a tree, a nexus of relationships.",
      keywords: "Multipurpose, systemic relations, manifold, multifacted, stacking functions"
    },
    {
      name: "Cycle nutrients",
      tagline: "Waste is simply nutrients out of circulation",
      description: "A monster is that which grows when we don't engage with it ‚Äî integrate the shadow and bring in the externalities. Renew purpose for the rejected and 'used up'.",
      keywords: "Upcycle, zero waste, circular economy, cyclical growth, autophagy, reintegration"
    }
  ]
};

// Build a compact string representation for the system prompt
function buildVocabularyPrompt() {
  let prompt = "COMPLETE CARDS FOR LIFE VOCABULARY:\n\n";

  for (const [category, cards] of Object.entries(FULL_CARDS)) {
    prompt += `=== ${category.toUpperCase()} CARDS ===\n\n`;
    for (const card of cards) {
      prompt += `[${card.name.toUpperCase()}]\n`;
      prompt += `Tagline: "${card.tagline}"\n`;
      prompt += `Description: ${card.description}\n`;
      prompt += `Keywords: ${card.keywords}\n\n`;
    }
  }
  return prompt;
}


// Adapter for vocab strip
const CARDS = {
  dynamics: FULL_CARDS.dynamics.map(c => c.name),
  being:    FULL_CARDS.being.map(c => c.name),
  doing:    FULL_CARDS.doing.map(c => c.name)
};

const SYSTEM_PROMPT =
`You are the Regenerative Translator. You convert technical IT, HPC, and engineering communications into the language of the Cards for Life (CfL) deck used in "Thinking Like Gaia" corporate training.

Rules:
1. Preserve all the information from the input, but render it entirely in CfL vocabulary and Gaia-thinking style.
2. Choose 1-2 cards that meaningfully frame the situation and start with: Card drawn: [NAME(S)]
3. Use the card taglines, descriptions and keywords authentically throughout the translation.
4. Use characteristic verbs: emerge, honour, release, tend, compost, regenerate, witness, hold space, attune, embody, unfurl, revitalise.
5. Treat every technical problem as a natural life cycle phase ‚Äî never a failure.
6. Be completely earnest and sincere. The humour comes from register collision, not irony.
7. The Karpman drama triangle can be applied in addition to the cards
8. Match the length of the input approximately.

` + buildVocabularyPrompt();

const EXAMPLES = [
  { label:"ALPS fabric recovery",
    text:"ALPS is recovering the fabric. Storage seems to be ok, waiting for someone else to do some tests." },
  { label:"Memory fragmentation",
    text:"Performance issues with HPL are due to memory fragmentation that persists between process launches. AMD to share a defragmentation script for SLURM prolog or periodic execution." },
  { label:"Driver upgrade",
    text:"Driver upgrade 6.10.5 helped with the memory fragmentation issue. AMD promised to share a defragmentation script. May run in SLURM prolog, or once per day depending on execution time." },
  { label:"GPU kernel crash",
    text:"ROCm runtime error: illegal memory access at kernel launch. Process terminated with signal 11. Core dump written to /tmp. Please investigate." },
  { label:"MPI deadlock",
    text:"Job 847291 hung for 6 hours with no output. All MPI ranks appear to be waiting. Likely deadlock in collective communication. Killed by scheduler." },
  { label:"Spack build failure",
    text:"Spack installation of SIRIUS@7.5.0 failed: CMake could not find HDF5. Module hdf5/1.12.2 is loaded but pkg-config returns wrong prefix. Workaround: set HDF5_DIR manually." },
  { label:"Cluster maintenance",
    text:"System will be taken offline for maintenance Friday 18:00 UTC. Expected downtime 8 hours. All running jobs will be killed. Please save your work." },
  { label:"Disk quota exceeded",
    text:"User storage quota exceeded on /scratch. 98% used. Jobs failing with no space left on device. Please delete unnecessary files or request a quota increase." },
  { label: "IPv6 network error",
    text: "Hello! when i see issues like 137: [W217 13:43:26.043282773 socket.cpp:755] [c10d] The IPv6 network addresses of (nid006577, 30072) cannot be retrieved (gai error: -2 - Name or service not known). which slowdown scripts startup is it due to issues in cluster? or should i suspect the config i'm trying?"}
];

function $(id){ return document.getElementById(id); }

function renderVocab(){
  [["vtDyn","dynamics"],["vtBeing","being"],["vtDoing","doing"]].forEach(([id,cat])=>{
    const el = $(id);
    CARDS[cat].forEach(name=>{
      const t = document.createElement("span");
      t.className="vtag"; t.textContent=name;
      el.appendChild(t);
    });
  });
}

function renderExamples(){
  const el = $("pills");
  EXAMPLES.forEach(ex=>{
    const b = document.createElement("button");
    b.className="pill"; b.textContent=ex.label;
    b.onclick=()=>{ $("inp").value=ex.text; };
    el.appendChild(b);
  });
}

function formatOutput(text){
  const lines = text.trim().split("\n");
  let cardLine="", rest="";
  if(lines[0] && lines[0].toLowerCase().startsWith("card drawn")){
    cardLine = lines[0].replace(/^card drawn:\s*/i,"").trim();
    rest = lines.slice(1).join("\n").trim();
  } else {
    rest = text.trim();
  }
  let html="";
  if(cardLine) html += `<div class="card-badge">‚ú¶ ${cardLine} ‚ú¶</div><br>`;
  rest.split(/\n\n+/).filter(p=>p.trim()).forEach(p=>{
    html += `<p class="out-text">${p.replace(/\n/g,"<br>")}</p>`;
  });
  return html;
}

async function doTranslate(){
  const input = $("inp").value.trim();
  if(!input) return;

  const apiKey = $("apiKey").value.trim();
  if(!apiKey){
    $("out").innerHTML = `<p class="err">Please enter your Anthropic API key below the translator.<br><br>Get one free at console.anthropic.com</p>`;
    return;
  }

  const btn = $("goBtn");
  const copyBtn = $("copyBtn");
  btn.disabled = true;
  copyBtn.classList.remove("show");
  $("out").innerHTML = `<div class="loading"><div class="spin">üåø</div><div class="spin-txt">communing with the living system...</div></div>`;

  try {
    const res = await fetch("https://api.anthropic.com/v1/messages",{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "x-api-key": apiKey,
        "anthropic-version":"2023-06-01",
        "anthropic-dangerous-direct-browser-access":"true"
      },
      body: JSON.stringify({
        model:"claude-sonnet-4-5-20250929",
        max_tokens:1000,
        system: SYSTEM_PROMPT,
        messages:[{role:"user", content:input}]
      })
    });

    if(!res.ok){
      const err = await res.json().catch(()=>({}));
      throw new Error(err.error?.message || `HTTP ${res.status}`);
    }

    const data = await res.json();
    const text = data.content.map(b=>b.text||"").join("");
    $("out").innerHTML = formatOutput(text);
    copyBtn.classList.add("show");

  } catch(e){
    $("out").innerHTML = `<p class="err">Disruption encountered: ${e.message}<br><br><em>There is no breakthrough without breakdown.</em></p>`;
  }

  btn.disabled = false;
}

function doCopy(){
  const text = $("out").innerText;
  navigator.clipboard.writeText(text).then(()=>{
    const b = $("copyBtn");
    b.textContent="‚úì harvested";
    b.classList.add("copied");
    setTimeout(()=>{ b.innerHTML="üìã copy"; b.classList.remove("copied"); },2000);
  });
}

function doClear(){
  $("inp").value="";
  $("out").innerHTML=`<p class="out-empty">The translation will emerge here, when you are ready to receive it.</p>`;
  $("copyBtn").classList.remove("show");
}

document.addEventListener("keydown",e=>{
  if((e.ctrlKey||e.metaKey)&&e.key==="Enter") doTranslate();
});

renderVocab();
renderExamples();
</script>
</body>
</html>
